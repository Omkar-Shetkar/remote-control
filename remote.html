<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>YouTube Remote</title>
    <style>
      :root {
        --background-color: #121212;
        --surface-color: #1e1e1e;
        --primary-color: #bb86fc;
        --text-color: #e0e0e0;
        --icon-color: #ffffff;
      }
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        -webkit-tap-highlight-color: transparent;
      }
      .container {
        width: 100%;
        max-width: 400px;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      h1 {
        font-weight: 300;
        color: #ffffff;
        text-align: center;
        margin-bottom: 20px;
      }
      .control-button {
        background-color: var(--surface-color);
        border: none;
        border-radius: 50%;
        width: 70px;
        height: 70px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: background-color 0.2s ease, transform 0.1s ease;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
      }
      .control-button:active {
        transform: scale(0.95);
        background-color: #333;
      }
      .control-button svg {
        width: 32px;
        height: 32px;
        fill: var(--icon-color);
      }
      #play-pause-button svg.play-icon {
        display: block;
      }
      #play-pause-button svg.pause-icon {
        display: none;
      }
      .main-controls {
        display: flex;
        justify-content: space-around;
        align-items: center;
      }
      .volume-control {
        display: flex;
        align-items: center;
        gap: 15px;
        background-color: var(--surface-color);
        padding: 10px 20px;
        border-radius: 25px;
      }
      .volume-control svg {
        width: 24px;
        height: 24px;
        fill: var(--icon-color);
      }
      #volume-slider {
        -webkit-appearance: none;
        appearance: none;
        width: 100%;
        height: 8px;
        background: #444;
        outline: none;
        border-radius: 4px;
      }
      #volume-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: var(--primary-color);
        cursor: pointer;
        border-radius: 50%;
      }
      #volume-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: var(--primary-color);
        cursor: pointer;
        border-radius: 50%;
      }
      #status {
        position: fixed;
        top: 10px;
        left: 50%;
        transform: translateX(-50%);
        padding: 8px 16px;
        border-radius: 8px;
        font-size: 0.9rem;
        transition: all 0.3s ease;
      }
      .status-disconnected {
        background-color: #b71c1c;
        color: white;
      }
      .status-connected {
        background-color: #1b5e20;
        color: white;
      }
    </style>
  </head>
  <body>
    <div id="status" class="status-disconnected">Connecting...</div>
    <div class="container">
      <h1>Remote Control</h1>

      <div class="main-controls">
        <button class="control-button" id="seek-backward">
          <svg viewBox="0 0 24 24">
            <path d="M11 18V6l-8.5 6 8.5 6zm.5-6l8.5 6V6l-8.5 6z" />
          </svg>
        </button>
        <button class="control-button" id="play-pause-button">
          <svg class="play-icon" viewBox="0 0 24 24">
            <path d="M8 5v14l11-7z" />
          </svg>
          <svg class="pause-icon" viewBox="0 0 24 24">
            <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
          </svg>
        </button>
        <button class="control-button" id="seek-forward">
          <svg viewBox="0 0 24 24">
            <path d="M4 18l8.5-6L4 6v12zm9-12v12l8.5-6L13 6z" />
          </svg>
        </button>
      </div>

      <div class="volume-control">
        <svg viewBox="0 0 24 24">
          <path
            d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"
          />
        </svg>
        <input type="range" id="volume-slider" min="0" max="100" value="80" />
      </div>

      <div class="main-controls">
        <button class="control-button" id="toggle-mute">
          <svg viewBox="0 0 24 24">
            <path
              d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"
            />
          </svg>
        </button>
      </div>
    </div>

    <script>
      const statusDiv = document.getElementById("status");
      const playPauseBtn = document.getElementById("play-pause-button");
      const playIcon = playPauseBtn.querySelector(".play-icon");
      const pauseIcon = playPauseBtn.querySelector(".pause-icon");
      const seekBackwardBtn = document.getElementById("seek-backward");
      const seekForwardBtn = document.getElementById("seek-forward");
      const toggleMuteBtn = document.getElementById("toggle-mute");
      const volumeSlider = document.getElementById("volume-slider");

      let isPlaying = true; // Assume playing at start
      let ws;

      function connect() {
        // This will connect to the server that served this file.
        // No need to hardcode an IP address!
        const wsUrl = `ws://${window.location.host}`;
        ws = new WebSocket(wsUrl);

        ws.onopen = () => {
          console.log("Connected to WebSocket server.");
          statusDiv.textContent = "Connected";
          statusDiv.className = "status-connected";
        };

        ws.onclose = () => {
          console.log("Disconnected from WebSocket server.");
          statusDiv.textContent = "Disconnected";
          statusDiv.className = "status-disconnected";
          setTimeout(connect, 3000); // Try to reconnect
        };

        ws.onerror = (error) => {
          console.error("WebSocket Error: ", error);
          ws.close();
        };
      }

      function sendCommand(command, value = null) {
        if (ws && ws.readyState === WebSocket.OPEN) {
          const message = { command };
          if (value !== null) {
            message.value = value;
          }
          ws.send(JSON.stringify(message));
        } else {
          console.log("WebSocket is not connected.");
        }
      }

      function updatePlayPauseUI() {
        playIcon.style.display = isPlaying ? "none" : "block";
        pauseIcon.style.display = isPlaying ? "block" : "none";
      }

      playPauseBtn.addEventListener("click", () => {
        const command = isPlaying ? "pause" : "play";
        sendCommand(command);
        isPlaying = !isPlaying;
        updatePlayPauseUI();
      });

      seekBackwardBtn.addEventListener("click", () => sendCommand("seek", -10));
      seekForwardBtn.addEventListener("click", () => sendCommand("seek", 10));
      toggleMuteBtn.addEventListener("click", () => sendCommand("toggleMute"));

      volumeSlider.addEventListener("input", () => {
        sendCommand("setVolume", parseInt(volumeSlider.value, 10));
      });

      // Initialize UI
      updatePlayPauseUI();

      // Initial connection
      connect();
    </script>
  </body>
</html>
